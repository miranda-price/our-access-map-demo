<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <title>Our Access - Find a route</title>
        <link rel="shortcut icon" type="image/jpg" href="assets/favicon.png"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.8.0/leaflet.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.8.0/leaflet.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="override.css">
        <link rel="stylesheet" href="https://use.typekit.net/tjw1ebq.css">
    </head>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
            <img src="assets/our_access_logo.png" alt="" height="32" class="d-inline-block align-text-top">
            Our Access
        </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
          <a class="nav-link active" href="#">Accessibility Map</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="service-request.html">Service Request</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="disability-resources.html">Disability Resources</a>
        </li>
      </ul>
      </div>
    </div>
  </nav>

  <body id="accessibility-map" onresize="if(window.outerWidth > 800) document.getElementById('map').hidden = false;">
    <div id="routing">
        <aside id="sidebar-container">
            <div id="sidebar">
                <div id="route-input">
                  <img src="assets/funnel-fill.svg" id="filter-access" alt="icon to bring up access features checkboxes" role="button" onclick="document.getElementById('map').hidden = !document.getElementById('map').hidden;">
                    <div id="input-fields">
                        <div class="input-group mb-3">
                          <select class="form-select" aria-label="Select starting building" id="start-building" name="start-building" onchange="propogateFloors('start-building', 'start-floor')">
                            <option selected></option>
                            <option>Burton</option>
                            <option>Morey</option>
                            <option>Rettner</option>
                            <option>Rush Rhees</option>
                          </select>
                            <select class="form-select" aria-label="Select starting floor" id="start-floor" name="start-floor">
                                <option selected>--</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                          <select class="form-select" aria-label="Select destination building" id="end-building" name="end-building" onchange="propogateFloors('end-building', 'end-floor')">
                            <option selected></option>
                            <option>Burton</option>
                            <option>Morey</option>
                            <option>Rettner</option>
                            <option>Rush Rhees</option>
                          </select>
                            <select class="form-select" aria-label="Select destination floor" id="end-floor" name="end-floor">
                                <option selected>--</option>
                            </select>
                        </div>
                    </div>
                    <img src="assets/bx-transfer.svg" alt="icon to switch starting location with destination" role="button" onclick="switchInput()">
                </div>
                <div id="route-info">
                    <button type="button" class="btn-close" id="close-info" aria-label="Close" onclick="document.getElementById('map').hidden = false"></button>
                    <div id="info-header"><h2>Destination</h2></div>
                    <div id="access-features">
                        <h3>Allow the following:</h3>
                        <form id="access-checkboxes">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="allowSteps" id="allowSteps">
                                <label class="form-check-label" for="allowSteps">
                                    Allow Steps
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="allowStairs" id="allowStairs">
                                <label class="form-check-label" for="allowStairs">
                                    Allow Stairs
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="allowDoors" id="allowDoors">
                                <label class="form-check-label" for="allowDoors">
                                    Allow Manual Doors
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="allowElevators" id="allowElevators">
                                <label class="form-check-label" for="allowElevators">
                                    Allow Inaccessible Elevators
                                </label>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="route-directions" hidden>
                  <div id="input-bar">
                    <img src="assets/arrow-return-left.svg" id="redo-input" alt="icon to go back to adjust route requirements" role="button" onclick="endRoute()">
                    <div id="display-input">
                      <p id="display-start">Burton 1</p>
                      <p>&#10141</p>
                      <p id="display-end">Rettner 2</p>
                    </div>
                    <p id="route-length">678 feet</p>
                  </div>
                  <div id="current-dir-box" class="current-dir">
                    <div class="dir-step-overview">
                      <img src="assets/list-task.svg" id="toggle-dir" alt="icon to bring up list of all steps for route" role="button" onclick="document.getElementById('map').hidden = !document.getElementById('map').hidden;">
                      <p id="current-dir-building">Rettner</p>
                      <p id="current-dir-type">Change floors</p>
                      <img src="assets/exclamation-octagon-fill.svg" class="dir-step-report" alt="icon to report broken access feature for this step in the route" role="button" onclick="console.log('report function')">
                    </div>
                    <div class="form-check dir-step" id="current-dir-check">
                      <input class="form-check-input" type="checkbox" value="" id="" onchange="checkFromCurrent(event)">
                      <label class="form-check-label" for="">
                        <p id="current-dir-step">Move from 1st floor to 2nd floor Move from 1st floor to 2nd floor Move from 1st floor to 2nd floor</p>
                      </label>
                    </div>
                  </div>
                </div>
                <div id="directions-container" hidden>
                    <div id="display-directions">
                        <ul id="directions"></ul>
                    </div>
                </div>
                <button class="btn btn-primary" id="find-route" onclick="find_route(event)">Go</button> 
                <button class="btn btn-secondary" id="finish-route"  data-bs-toggle="modal" data-bs-target="#end-route-confirmation" hidden>Finish</button>
            </div>
        </aside>
        <main id="map"></main>
    </div>
    
    <!-- Confirmation pop up -->
    <div class="modal fade" id="end-route-confirmation" tabindex="-1" aria-labelledby="end directions confirmation pop-up" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="end-route-label">End Journey</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
               <p>Did you get to your destination?</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="endRoute()">Yes, end journey</button>
              <button type="button" class="btn btn-primary-outline" data-bs-dismiss="modal">No, take me back</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Report from map pop up #1 -->
    <div class="modal fade" id="map-report" tabindex="-1" aria-labelledby="report issue from map directions pop-up" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="map-report-label">Report</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="report-single" hidden></p>
                <div id="report-multiple" hidden></div>

                <div class="form-floating">
                    <input type="email" class="form-control required" id="map-reporter-email" placeholder="University Email" required = "true">
                    <label for="map-reporter-email"><span style="color: red;">*</span> University Email</label>
                </div>
                <div class="form-floating">
                    <input type="tel" class="form-control required" id="map-reporter-phone" placeholder="Phone Number" required = "true">
                    <label for="map-reporter-phone"><span style="color: red;">*</span> Phone Number</label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal"  data-bs-toggle="modal" data-bs-target="#map-report-details" onclick="mapReportDetails()">Next</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Report from map pop-up #2 -->
      <div class="modal fade" id="map-report-details" tabindex="-1" aria-labelledby="report more details pop-up" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="map-report-details-label">Report</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="report-selected"></p>

                <div>
                    <label for="map-reporter-details">Are there any additional details you wish to provide?</label>
                    <input type="textarea" id="map-reporter-details">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal"  data-bs-toggle="modal" data-bs-target="#map-report-confirmation" onclick="confirmMapReport()">Submit Report</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Report from map confirmation pop-up -->
      <div class="modal fade" id="map-report-confirmation" tabindex="-1" aria-labelledby="report issue from map confirmation pop-up" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="map-report-confirm-label">Report Confirmation</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="confirm-reporter-email"></p>
                <p id="confirm-reporter-phone"></p>
                <p id="confirm-report-date"></p>
                <p id="you-reported"></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    <script src="scripts/map-script.js"></script>
  </body>
  <footer>&copy Our Access 2023</footer>
  </html>